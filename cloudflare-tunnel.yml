# Cloudflare Tunnel configuration for Laravel Livewire application
# Replace 'kreasi-kita-tunnel' with your actual tunnel name

tunnel: kreasi-kita-tunnel
credentials-file: /etc/cloudflared/kreasi-kita-tunnel.json

# Ingress rules
ingress:
  # Main application
  - hostname: kreasi-kita.my.id
    service: http://localhost:3000
    originRequest:
      httpHostHeader: kreasi-kita.my.id
      # Enable WebSocket support for Livewire
      noTLSVerify: true
      connectTimeout: 30s
      tlsTimeout: 30s
      tcpKeepAlive: 30s
      keepAliveConnections: 10
      keepAliveTimeout: 90s
      
  # WebSocket endpoint for Livewire (if using Laravel WebSockets)
  - hostname: ws.kreasi-kita.my.id
    service: http://localhost:6001
    originRequest:
      httpHostHeader: ws.kreasi-kita.my.id
      noTLSVerify: true
      # WebSocket specific settings
      upgradeHeaders:
        Upgrade: websocket
        Connection: Upgrade
      
  # API subdomain (optional)
  - hostname: api.kreasi-kita.my.id
    service: http://localhost:3000
    originRequest:
      httpHostHeader: api.kreasi-kita.my.id
      noTLSVerify: true
      
  # Catch-all rule
  - service: http_status:404

# Global settings
originRequest:
  # Headers to pass through
  connectTimeout: 30s
  tlsTimeout: 30s
  tcpKeepAlive: 30s
  keepAliveConnections: 10
  keepAliveTimeout: 90s
  httpHostHeader: ""
  originServerName: ""
  caPool: ""
  noTLSVerify: false
  disableChunkedEncoding: false
  bastionMode: false
  proxyAddress: ""
  proxyPort: 0
  proxyType: ""
  ipRules: []
  
# Metrics server (optional)
metrics: localhost:8080